<card class="mb-4">
  <card-header
    class="d-flex align-items-center bg-inverse bg-opacity-10 fw-400"
  >
    DOCUMENTACIÓN
  </card-header>
  <form method="POST" enctype="multipart/form-data">
    <card-body class="pb-2">
      <div class="d-block d-lg-flex align-items-center">
        <input
          #inputFile
          multiple
          formControlName="files"
          type="file"
          style="display: none"
          [accept]="REQUIRED_FILE_TYPES"
          (change)="onFileSelect($event)"
          #fileSelect
        />
        <span
          (click)="fileSelect.click()"
          class="btn btn-outline-theme fileinput-button me-2 mb-1"
        >
          <i class="fa fa-fw fa-plus"></i>
          <span>Añadir...</span>
        </span>
        <button
          (click)="uploadFiles()"
          type="submit"
          class="btn btn-outline-default me-2 mb-1 start"
        >
          <i class="fa fa-fw fa-upload"></i>
          <span>Subir</span>
        </button>
        <!-- <button type="reset" class="btn btn-outline-default me-2 mb-1 cancel">
          <i class="fa fa-fw fa-ban"></i>
          <span>Cancelar</span>
        </button> -->
        <button
          (click)="deleteFiles()"
          type="button"
          class="btn btn-outline-default me-2 mb-1 delete"
        >
          <i class="fa fa-fw fa-trash"></i>
          <span>Eliminar</span>
        </button>
        <div class="form-check ms-2 mb-1">
          <input
            type="checkbox"
            id="toggle-delete"
            class="form-check-input toggle"
          />
          <label for="toggle-delete" class="form-check-label"
            >Selección de ficheros</label
          >
        </div>
      </div>
    </card-body>
    <div class="table-container table-responsive">
      <table class="table table-card mb-0 fs-13px">
        <thead>
          <tr class="fs-12px">
            <th class="pt-2 pb-2 w-20 text-center">PREVIA</th>
            <th class="pt-2 pb-2 w-25">NOMBRE</th>
            <th class="pt-2 pb-2 w-10 text-center">TAMAÑO</th>
            <th class="pt-2 pb-2 w-25 text-center">PROGRESO</th>
            <th class="pt-2 pb-2 w-20 text-center">ACCION</th>
          </tr>
        </thead>
        <tbody *ngIf="files.length === 0">
          <tr class="empty-row">
            <td colspan="4" class="text-center p-3">
              <div class="text-inverse text-opacity-30 mb-2">
                <i class="fa fa-file-archive fa-3x"></i>
              </div>
              Sin ficheros
            </td>
          </tr>
        </tbody>
        <tbody *ngIf="files.length > 0" class="files">
          <tr
            class="template-upload in"
            *ngFor="let file of files; let i = index"
          >
            <td class="preview-container">
              <span
                class="preview d-flex justify-content-center flex-align-center"
                style="height: 80px"
              >
                <img
                  *ngIf="preview[i]; else defaultImage"
                  [src]="preview[i]"
                  [title]="file.name"
                  [alt]="file.name"
                />
                <ng-template #defaultImage>
                  <img [src]="defaultImage" alt="Imagen por defecto" />
                </ng-template>
              </span>
            </td>
            <td class="name-container text-left">
              <p class="name mb-1 text-left">{{ file.name }}</p>
            </td>
            <td class="size-container text-center">
              <p class="text-center">{{ file.file.size }} KB</p>
            </td>
            <td class="progress-container">
              <div
                class="progress progress-sm mb-0 h-10px progress-striped active"
              >
                <div
                  class="progress-bar bg-theme"
                  [style.width.%]="progress[i]"
                ></div>
                <div
                  class="progress-bar bg-theme"
                  [style.width.%]="progress[i]"
                ></div>
              </div>
            </td>
            <td nowrap class="action-container">
              <button
                (click)="uploadFile(i)"
                class="btn btn-outline-theme btn-sm d-block w-100 start"
                disabled=""
              >
                <span>Subir</span>
              </button>

              <button
                (click)="deleteFiles(i)"
                class="btn btn-outline-default btn-sm d-block w-100 cancel mt-2"
              >
                <span>Cancelar</span>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </form>
</card>
